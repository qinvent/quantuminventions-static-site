name = "quantuminventions-remote"
compatibility_date = "2024-01-01"

[env.production]
name = "quantuminventions-remote"
route = "quantuminventions.com/*"

[env.staging]
name = "quantuminventions-remote-staging"

# Build configuration - no build needed, direct upload
[build]
command = ""
cwd = "../www.quantuminventions.com"
watch_dir = "../www.quantuminventions.com"

# Custom headers for better performance
[[headers]]
for = "/*"
[headers.values]
X-Frame-Options = "DENY"
X-Content-Type-Options = "nosniff"
Referrer-Policy = "strict-origin-when-cross-origin"
Permissions-Policy = "camera=(), microphone=(), geolocation=()"

[[headers]]
for = "*.css"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.js"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.jpg"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.png"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.gif"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.svg"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.woff2"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.woff"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.ttf"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.eot"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

# Redirects for clean URLs
[[redirects]]
from = "/index.html"
to = "/"
status = 301

# Handle WordPress-style parameter URLs
[[redirects]]
from = "/index.html@p=*"
to = "/page/:splat"
status = 301

[[redirects]]
from = "/index.html@post_type=*&p=*"
to = "/:splat"
status = 301

# 404 handling - serve main index.html for any missing pages
[[redirects]]
from = "/*"
to = "/index.html"
status = 404
